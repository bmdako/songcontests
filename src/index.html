<!doctype html>
<html>
  <head>
    <script src="/socket.io/socket.io.js"></script>

    <title>MGP 2015</title>
  </head>
  <body>
    <h1>Usage</h1>
      <pre>
    var socket = io();
    socket.emit('join', 'mgp2015');
    socket.on('nowplaying', function (msg) {
        console.log('nowplaying', msg);
    });

    socket.on('newrating', function (msg) {
      console.log('newrating', msg);
    });

    socket.emit('like', 1, function (msg) {
        console.log(msg);
    });
      </pre>
    <label for="session">Session</label><input type="text" id="session" name="session" value="arthur-nedtur"/><input type="checkbox" name="random" value="random" id="random" checked="checked">
    <button id="upvote11">Upvote 1:1</button>
    <button id="downvote11">Downvote 1:1</button>
    <button id="upvote12">Upvote 1:2</button>
    <button id="downvote12">Downvote 1:2</button>

    <script>
      var socket = io();
      socket.emit('join', 'mgp2015');
      socket.on('nowplaying', function (msg) {
        console.log('nowplaying', msg);
      });

      socket.on('newrating', function (msg) {
        console.log('newrating', msg);
      });


      var upvote11 = document.getElementById('upvote11');
      var downvote11 = document.getElementById('downvote11');
      var upvote12 = document.getElementById('upvote12');
      var downvote12 = document.getElementById('downvote12');
      var sessionstring = document.getElementById('session');
      var random = document.getElementById('random');

      var newsession = function() {
        sessionstring.value = Math.random().toString(36).replace(/[^a-z]+/g, '').substr(0, 10);
      };


      upvote11.onclick = function() {
        socket.emit('like', {
          song: '1',
          event: '1',
          session: sessionstring.value
        });
        if (random.checked) {
          newsession();
        }
      };
      downvote11.onclick =function() {
        socket.emit('dislike', {
          song: '1',
          event: '1',
          session: sessionstring.value
        });
        if (random.checked) {
          newsession();
        }
      };
      upvote12.onclick = function() {
        socket.emit('like', {
          song: '2',
          event: '1',
          session: sessionstring.value
        });
        if (random.checked) {
          newsession();
        }
      };
      downvote12.onclick = function() {
        socket.emit('dislike', {
          song: '2',
          event: '1',
          session: sessionstring.value
        });
        if (random.checked) {
          newsession();
        }
      };


    </script>
  </body>
</html>
